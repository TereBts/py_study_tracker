{% extends "base.html" %}

{% block content %}
  <h1>Goal Details</h1>

  <p><strong>Course:</strong> {{ object.course }}</p>
  <p><strong>Weekly Hours Target:</strong> {{ object.weekly_hours_target }}</p>
  <p><strong>Weekly Lessons Target:</strong> {{ object.weekly_lessons_target }}</p>
  <p><strong>Study Days Per Week:</strong> {{ object.study_days_per_week }}</p>

  {% if object.daily_hours_target %}
    <p><strong>Daily Hours Target:</strong> {{ object.daily_hours_target|floatformat:2 }}</p>
  {% endif %}
  {% if object.daily_lessons_target %}
    <p><strong>Daily Lessons Target:</strong> {{ object.daily_lessons_target|floatformat:2 }}</p>
  {% endif %}

  {% if object.milestone_name %}
    <hr>
    <p><strong>Milestone:</strong> {{ object.milestone_name }}{% if object.milestone_date %} (due {{ object.milestone_date }}){% endif %}</p>
    <p><strong>Total Required Lessons:</strong> {{ object.total_required_lessons }}</p>
  {% endif %}

  <hr>

  {% if object.weekly_hours_target %}
    <p>
      <strong>This week:</strong> {{ object.weekly_study_minutes }} mins
      (Target: {{ object.weekly_hours_target|floatformat:1 }} h)
    </p>
    <div class="progress-bar">
      <div class="progress-fill" style="width: {{ object.weekly_progress_percent }}%;">
        {{ object.weekly_progress_percent }}%
      </div>
    </div>
  {% else %}
    <p><strong>Lifetime:</strong> {{ object.total_study_hours }} hours logged</p>
  {% endif %}

  <hr>

  <a href="{% url 'goals:edit' pk=object.pk %}" class="btn btn-warning">Edit Goal</a>
  <form action="{% url 'goals:delete' pk=object.pk %}" method="post" style="display:inline"
        onsubmit="return confirm('Delete this goal?');">
    {% csrf_token %}
    <button type="submit" class="btn btn-danger">Delete</button>
  </form>
  <a href="{% url 'goals:list' %}" class="btn btn-secondary">Back to Goals</a>
{% endblock %}
