<!-- ============================================
  Template: courses/course_detail.html
  Description: Displays detailed information about a single course.
  Dependencies:
    - Extends base.html for consistent layout and navigation.
    - Context variable: `course` (Course instance).
    - Uses Bootstrap grid and StudyStarâ€™s dashboard styling.
  ============================================ -->

{% extends "base.html" %}

{% block title %}{{ course.title }}{% endblock %}

{% block content %}
  <div class="dashboard">

    <!-- ====== PAGE HEADER ======
         Displays course title and provider name if available. -->
    <header class="mb-4">
      <h1 class="h2 mb-2">{{ course.title }}</h1>
      {% if course.provider %}
        <p class="text-muted mb-0">
          <strong>Provider:</strong> {{ course.provider }}
        </p>
      {% endif %}
    </header>

    <!-- ====== COURSE DETAILS CARD ======
         Shows course description, status, dates, and colour. -->
    <section class="mb-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">

          <!-- ---- Description ---- -->
          {% if course.description %}
            <p class="mb-4">{{ course.description|linebreaks }}</p>
          {% endif %}

          <!-- ---- Course Info Grid ---- -->
          <div class="row gy-2">
            
            <!-- Status -->
            <div class="col-12 col-md-6">
              <p class="mb-1">
                <span class="fw-semibold text-uppercase small text-muted">Status</span><br>
                {{ course.get_status_display }}
              </p>
            </div>

            <!-- Start Date -->
            {% if course.start_date %}
              <div class="col-6 col-md-3">
                <p class="mb-1">
                  <span class="fw-semibold text-uppercase small text-muted">Start</span><br>
                  {{ course.start_date|date:"M j, Y" }}
                </p>
              </div>
            {% endif %}

            <!-- End Date -->
            {% if course.end_date %}
              <div class="col-6 col-md-3">
                <p class="mb-1">
                  <span class="fw-semibold text-uppercase small text-muted">End</span><br>
                  {{ course.end_date|date:"M j, Y" }}
                </p>
              </div>
            {% endif %}

            <!-- Colour -->
            {% if course.colour %}
              <div class="col-12 col-md-6 mt-2">
                <span class="fw-semibold text-uppercase small text-muted d-block mb-1">
                  Colour
                </span>
                <span
                  class="me-2 d-inline-block rounded"
                  style="width:18px; height:18px; border:1px solid rgba(0,0,0,0.1); background: {{ course.colour }};">
                </span>
                <span>{{ course.get_colour_display }}</span>
              </div>
            {% endif %}
          </div>

        </div>
      </div>
    </section>

    <!-- ====== ACTION BUTTONS ======
         Provides links to edit, delete, or add related goals for the course. -->
    <section class="mt-3">
      <div class="d-flex flex-wrap gap-2">
        
        <!-- Edit course -->
        <a href="{% url 'courses:update' course.slug %}" class="btn btn-primary">
          Edit
        </a>

        <!-- Delete course -->
        <a href="{% url 'courses:delete' course.slug %}" class="btn btn-outline-danger">
          Delete
        </a>

        <!-- Add a goal associated with this course 
             (query param allows pre-selection in form). -->
        <a href="{% url 'goals:create' %}?course={{ course.id }}" class="btn btn-outline-primary">
          + Add goal for this course
        </a>

        <!-- Back to course list -->
        <a href="{% url 'courses:list' %}" class="btn btn-link">
          Back to courses
        </a>
      </div>
    </section>

  </div>
{% endblock %}
